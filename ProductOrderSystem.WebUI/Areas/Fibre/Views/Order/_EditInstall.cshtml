<div ng-controller="EditInstallCtrl" ng-init="init()">
    <form name="form" class="form-horizontal">
        <fieldset>
            <legend>Order</legend>

            <ul class="nav nav-tabs nav-stacked">
                <li>
                    <a ng-click="isCollapsedSC = !isCollapsedSC">Sales Coordinator <i ng-class="getCollapseCss(isCollapsedSC)"></i></a>
                </li>
            </ul>
            <div collapse="isCollapsedSC">
                <div class="control-group">
                    <label class="control-label">Last Updated By</label>
                    <div class="controls">
                        {{model.User}}&nbsp;{{model.LastUpdateDatetime | datefilter | date:'yyyy-MM-dd'}}&nbsp;{{model.LastUpdateDatetime | datefilter | date:'shortTime'}}
                    </div>
                </div>

                <h4>Sales Person Information</h4>

                <div class="control-group">
                    <label class="control-label">Name</label>
                    <div class="controls">
                        {{model.SalesPerson}}
                    </div>
                </div>

                <h4>Order Information</h4>

                <div class="control-group">
                    <label class="control-label">Order Type</label>
                    <div class="controls">
                        {{model.OrderType}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Status</label>
                    <div class="controls">
                        {{model.StatusSC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Received Date</label>
                    <div class="controls">
                        {{model.ReceivedDate | datefilter | date:'yyyy-MM-dd'}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Received Time</label>
                    <div class="controls">
                        {{model.ReceivedTime | datefilter | date:'shortTime'}}
                    </div>
                </div>

                <h4>Customer Information</h4>

                <div class="control-group">
                    <label class="control-label">Customer Name</label>
                    <div class="controls">
                        {{model.CustName}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Customer Address</label>
                    <div class="controls">
                        {{model.CustAddr}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Customer ID</label>
                    <div class="controls">
                        {{model.CustID}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Contact Person Name</label>
                    <div class="controls">
                        {{model.ContactPerson}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Contact Person No.</label>
                    <div class="controls">
                        {{model.ContactPersonNo}}
                    </div>
                </div>

                <h4 ng-hide="model.OrderTypeID == 4">New &amp; Variation Order Only</h4>

                <div class="control-group">
                    <label class="control-label"></label>
                    <div class="controls">
                        <label class="checkbox inline" ng-hide="hideIsCoverageAvailable">
                            <i ng-class="$parent.getYesNoIcon(model.IsCoverageAvailable)"></i> Coverage Area Available
                        </label>
                        <label class="checkbox inline" ng-hide="hideIsDemandList">
                            <i ng-class="getYesNoIcon(model.IsDemandList)"></i> Demand List
                        </label>
                        <label class="checkbox inline" ng-hide="hideIsReqFixedLine">
                            <i ng-class="getYesNoIcon(model.IsReqFixedLine)"></i> Request Fixed Line
                        </label>
                        <label class="checkbox inline" ng-hide="hideIsCeoApproved">
                            <i ng-class="getYesNoIcon(model.IsCeoApproved)"></i> CEO Approved
                        </label>
                        <label class="checkbox inline" ng-hide="hideIsWithdrawFixedLineReq">
                            <i ng-class="getYesNoIcon(model.IsWithdrawFixedLineReq)"></i> Withdraw Fixed Line Request
                        </label>
                    </div>
                </div>
                <div class="control-group" ng-hide="hideReasonWithdraw">
                    <label class="control-label">Reason For Withdrawal</label>
                    <div class="controls">
                        {{model.ReasonWithdraw}}
                    </div>
                </div>

                <h4>Installation / Removal</h4>

                <div class="control-group">
                    <label class="control-label">KIV</label>
                    <div class="controls">
                        <i ng-class="getYesNoIcon(model.IsKIV)"></i>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Booked Installation / Removal Date</label>
                    <div class="controls">
                        {{model.BookedInstallDate | datefilter | date:'yyyy-MM-dd'}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Booked Installation / Removal Time</label>
                    <div class="controls">
                        {{model.BookedInstallTime | datefilter | date:'shortTime'}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">BTU Installed</label>
                    <div class="controls">
                        <i ng-class="getYesNoIcon(model.IsBTUInstalled)"></i>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Documents</label>
                    <div class="controls" ng-hide="!fileLinks.length">
                        <table class="table table-striped table-hover table-condensed">
                            <tr ng-repeat="file in fileLinks">
                                <td><a href="{{file.url}}" target="_blank">{{file.filename}}</a></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>

            <ul class="nav nav-tabs nav-stacked">
                <li>
                    <a ng-click="isCollapsedCC = !isCollapsedCC">Credit Control <i ng-class="getCollapseCss(isCollapsedCC)"></i></a>
                </li>
            </ul>
            <div collapse="isCollapsedCC">
                <div class="control-group">
                    <label class="control-label">Status</label>
                    <div class="controls">
                        {{model.StatusCC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Reason for Rejection</label>
                    <div class="controls">
                        {{model.ReasonRejectCC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Remarks</label>
                    <div class="controls">
                        {{model.RemarksCC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Last Updated By</label>
                    <div class="controls">
                        {{model.CCUser}}&nbsp;{{model.LastUpdateDatetimeCC | datefilter | date:'yyyy-MM-dd'}}&nbsp;{{model.LastUpdateDatetimeCC | datefilter | date:'shortTime'}}
                    </div>
                </div>
            </div>

            <ul class="nav nav-tabs nav-stacked">
                <li>
                    <a ng-click="isCollapsedFL = !isCollapsedFL">Fixed Line <i ng-class="getCollapseCss(isCollapsedFL)"></i></a>
                </li>
            </ul>
            <div collapse="isCollapsedFL">
                <div class="control-group">
                    <label class="control-label">Status</label>
                    <div class="controls">
                        {{model.StatusFL}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Reason for Rejection</label>
                    <div class="controls">
                        {{model.ReasonRejectFL}}
                    </div>
                </div>
                <div class="control-group" ng-hide="hideAllocatedFixedLineNo">
                    <label class="control-label">Allocated Fixed Line Number</label>
                    <div class="controls">
                        {{model.AllocatedFixedLineNo}}
                    </div>
                </div>
                <div class="control-group" ng-hide="hideRemarksFL">
                    <label class="control-label">Remarks</label>
                    <div class="controls">
                        {{model.RemarksFL}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Last Updated By</label>
                    <div class="controls">
                        {{model.FLUser}}&nbsp;{{model.LastUpdateDatetimeFL | datefilter | date:'yyyy-MM-dd'}}&nbsp;{{model.LastUpdateDatetimeFL | datefilter | date:'shortTime'}}
                    </div>
                </div>
            </div>

            <ul class="nav nav-tabs nav-stacked">
                <li>
                    <a ng-click="isCollapsedAC = !isCollapsedAC">Account Creation <i ng-class="getCollapseCss(isCollapsedAC)"></i></a>
                </li>
            </ul>
            <div collapse="isCollapsedAC">
                <div class="control-group">
                    <label class="control-label">Status</label>
                    <div class="controls">
                        {{model.StatusAC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Reason for Rejection</label>
                    <div class="controls">
                        {{model.ReasonRejectAC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Remarks</label>
                    <div class="controls">
                        {{model.RemarksAC}}
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Form Received</label>
                    <div class="controls">
                        <i ng-class="getYesNoIcon(model.IsFormReceived)"></i>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Last Updated By</label>
                    <div class="controls">
                        {{model.ACUser}}&nbsp;{{model.LastUpdateDatetimeAC | datefilter | date:'yyyy-MM-dd'}}&nbsp;{{model.LastUpdateDatetimeAC | datefilter | date:'shortTime'}}
                    </div>
                </div>
            </div>

            <ul class="nav nav-tabs nav-stacked">
                <li>
                    <a ng-click="isCollapsedInstall = !isCollapsedInstall">Installation <i ng-class="getCollapseCss(isCollapsedInstall)"></i></a>
                </li>
            </ul>
            <div collapse="isCollapsedInstall">
                <div class="control-group">
                    <label class="control-label">Status</label>
                    <div class="controls">
                        <select id="StatusInstall" name="StatusInstall" class="input-block-level"
                                ng-model="model.StatusInstall"
                                ng-required="true"
                                ui-select2
                                data-placeholder="Please select">
                            <option ng-repeat="o in model.StatusTypes" value="{{o.ID}}">{{o.Name}}</option>
                        </select>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Reason for Rejection</label>
                    <div class="controls">
                        <textarea id="ReasonRejectInstall" name="ReasonRejectInstall" class="input-block-level"
                                  placeholder="Reason for Rejection"
                                  x-webkit-speech="x-webkit-speech"
                                  ng-model="model.ReasonRejectInstall"
                                  ng-maxlength="200"></textarea>
                        <span class="label label-important" ng-show="form.ReasonRejectInstall.$error.maxlength">The field Reason for Rejection must be a string with a maximum length of 200.</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Installation Date</label>
                    <div class="controls">
                        <div class="control-group input-append">
                            <input id="InstallDate" name="InstallDate" type="text" class="input-medium"
                                   ng-model="model.InstallDate"
                                   ng-required="true"
                                   datepicker-popup="yyyy-MM-dd"
                                   is-open="openedInstallDate" />
                            <button type="button" class="btn" ng-click="openInstallDate()"><i class="icon-calendar"></i></button>
                        </div>
                        <span class="label label-important" ng-show="form.InstallDate.$error.required">The Installation Date field is required.</span>
                        <span class="label label-important" ng-hide="checkInstallDate()">Please select Monday to Friday only.</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Installation Time</label>
                    <div class="controls">
                        <div class="control-group input-append">
                            <input id="InstallTime" name="InstallTime" type="text" class="input-medium"
                                   ng-model="model.InstallTime"
                                   ng-required="true"
                                   bs-timepicker="" />
                            <button type="button" class="btn" data-toggle="timepicker"><i class="icon-time"></i></button>
                        </div>
                        <span class="label label-important" ng-show="form.InstallTime.$error.required">The Installation Time field is required.</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">BTU ID</label>
                    <div class="controls">
                        <input id="BTUID" name="BTUID" type="text" class="input-block-level"
                               placeholder="BTU ID"
                               x-webkit-speech="x-webkit-speech"
                               ng-model="model.BTUID"
                               ng-maxlength="30" />
                        <span class="label label-important" ng-show="form.BTUID.$error.maxlength">The field BTU ID must be a string with a maximum length of 30.</span>
                    </div>
                </div>
                <div class="control-group" ng-hide="hideBTUInstalled">
                    <label class="control-label">BTU Installed?</label>
                    <div class="controls">
                        <input id="BTUInstalled" name="BTUInstalled" type="text" class="input-block-level"
                               placeholder="BTU Installed?"
                               x-webkit-speech="x-webkit-speech"
                               ng-model="model.BTUInstalled"
                               ng-maxlength="30" />
                        <span class="label label-important" ng-show="form.BTUInstalled.$error.maxlength">The field BTU Installed? must be a string with a maximum length of 30.</span>
                    </div>
                </div>
                <div class="control-group" ng-hide="hideSIPPort">
                    <label class="control-label">SIP Port</label>
                    <div class="controls">
                        <input id="SIPPort" name="SIPPort" type="text" class="input-block-level"
                               placeholder="SIP Port"
                               x-webkit-speech="x-webkit-speech"
                               ng-model="model.SIPPort"
                               ng-maxlength="30" />
                        <span class="label label-important" ng-show="form.SIPPort.$error.maxlength">The field SIP Port must be a string with a maximum length of 30.</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Documents</label>
                    <div class="controls" ng-hide="!fileLinks.length">
                        <table class="table table-striped table-hover table-condensed">
                            <tr ng-repeat="file in fileLinks">
                                <td><a href="{{file.url}}" target="_blank">{{file.filename}}</a></td>
                                <td><button type="button" class="close" ng-click="deleteFile(file)" tooltip="Delete file" tooltip-trigger="mouseenter" tooltip-placement="bottom">&times;</button></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Select File</label>
                    <div class="controls">
                        <span class="btn btn-success fileinput-button">
                            <i class="icon-folder-open icon-white"></i>
                            <input type="file" name="file" id="fileupload" multiple upload="uploadOption" />
                            <span>Add files ...</span>
                        </span>
                        <div id="dropzone" class="fade well">Drop files here</div>
                        <div>
                            <span ng-show="!files.length">No files selected</span>
                            <ul class="nav nav-list">
                                <li ng-repeat="file in files">
                                    {{file}}
                                    <button type="button" class="close" ng-click="removeFile(file)">&times;</button>
                                </li>
                            </ul>
                        </div>
                        <div class="progress" ng-show="percentage">
                            <div class="bar" style="width: {{percentage}}%;"></div>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary pull-left" ng-click="upload()" ng-disabled="!files.length"><i class="icon-upload icon-white"></i> Upload</button>
                        </div>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label">Last Updated By</label>
                    <div class="controls">
                        {{model.InstallUser}}&nbsp;{{model.LastUpdateDatetimeInstall | datefilter | date:'yyyy-MM-dd'}}&nbsp;{{model.LastUpdateDatetimeInstall | datefilter | date:'shortTime'}}
                    </div>
                </div>

                <div class="control-group">
                    <div class="controls">
                        <button type="button" class="btn btn-primary" ng-click="save()"><i class="icon-ok icon-white"></i> Save</button>
                        <button type="button" class="btn btn-default" ng-click="cancelEdit()"><i class="icon-ban-circle"></i> Cancel</button>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</div>

<script src="~/Areas/Fibre/js/order/editinstall.js"></script>